name: Build

# æäº¤mainåˆ†æ”¯ä¼šè§¦å‘å½“å‰CI
on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3 # git å…‹éš†åˆ°å½“å‰æœºå™¨ä¸Š
      - name: Use Node.js
        uses: actions/setup-node@v3 # è®¾ç½®nodeç¯å¢ƒ
        with:
          node-version: 16.x # æŒ‡å®šç‰ˆæœ¬

      - name: Install dependencies
        run: npm i # è¿è¡Œ npm

        inputs:
          file-path: # id of input
            description: "Path to test script"
            required: true
            default: "è¾“å‡ºä¸ªğŸ”¨"

      - name: Run build
        run: npm run build # è¿è¡Œ npm build

      - name: View directory files
        run: ls -a # æŸ¥çœ‹æ‰“åŒ…åçš„ç›®å½•æ–‡ä»¶

      - uses: appleboy/scp-action@master # ä½¿ç”¨scp-actionè¿›è¡Œæ–‡ä»¶ä¸Šä¼ 
        with:
          host: ${{ secrets.HOST }} # æœåŠ¡å™¨host
          username: ${{ secrets.USER }} # æœåŠ¡å™¨ç”¨æˆ·å
          password: ${{ secrets.PASSWORD }} # æœåŠ¡å™¨å¯†ç 
          source: 'dist' # éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶
          target: '/data/project' # ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä»€ä¹ˆä½ç½®